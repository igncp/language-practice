- https://www.youtube.com/watch?v=FIeQU3yJrII
- [ ] 完成
- 大家好，我是steven
- 今集繼續docker的內容
- 會跟大家介紹怎樣建立自己的docker鏡像
- 分別會用到docker commit和Dockerfile兩種方式的
- 那我們就開始吧
- 打開終端機，先透過docker run建立一個ubuntu的容器
- 如果在你的電腦中沒有ubuntu的鏡像
- 它就會先從docker hub 中下載
- 容器建立完成後就會進入到裡面，ubuntu 的bash介面
- 好了，建立自己的docker鏡像是什麼意思呢
- 你見到我們剛才透過docker run ubuntu這句指令
- 就可以建立起一個ubuntu的容器
- 如果我們在這個ubuntu容器的基礎上
- 安裝一些軟件，例如node
- 以及寫好一個會輸出hello world的程式
- 我們可以再次將這個容器的狀態，打包成一個新的鏡像
- 意味著下次你，或者其他用户
- 可以直接透過docker run將這個已經安裝好nodejs
- 以及hello world程式的鏡像下載回來並且運行成為容器
- 好了，那我們先這個容器內安裝nodejs
- 安裝好之後，這個時候打開一個新的終端機
- 透過docker ps可以看到ubuntu容器正在運行當中
- 然後輸入docker diff，容器的id
- 這裡的概念有點像git
- 可以看到一個挺長的檔案列表
- 檔案前面的a代表新增了的檔案
- c代表更新了的安裝，而d代表移除了的檔案
- 剛才我們在容器內執行了apt update和安裝nodejs
- 這個列表就是反映了對比原來的ubuntu鏡像改動了哪些安裝
- 然後我們可以透過docker commit，容器的id
- 定義鏡像的名稱，名命方式有一個建議的
- 首先是自己的名稱，例如codingstartup
- 然後斜工，再輸入新鏡像的名稱，例如叫nodeapp
- 可以再加一個冒號，為這個鏡像定義一個版本號
- 例如是0.1，這裡不一定是數字，也可以是字串
- 然後enter，新的鏡像就生成了
- 輸入docker image ls查看本地的鏡像列表
- 可以見到一個是ubuntu
- 而另一個是我們剛剛建立的x
- 版本tag是0.1
- 可以看到它的大小是原ubuntu鏡像的一倍有多
- 好，先將原來的ubuntu容器關閉，輸入exit
- 然後將剛才建立的新鏡像運行起來
- 由於鏡像在本地，所以很快就運行了起來
- 輸入node -v，確定nodejs是已經安裝好的
- 那我們就再進一步打包這個鏡像
- 建立一個資料來，叫做app
- 然後在裡面建立一個hello檔案
- 檔案內容就是很簡單的一句console
- [3:12]
